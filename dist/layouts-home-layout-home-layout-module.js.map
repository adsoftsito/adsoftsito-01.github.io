{"version":3,"sources":["./src/services/graphql.sales.service.ts","./src/app/cart/cart.component.css","./src/app/checkout/checkout.component.html","./src/app/home/home.component.ts","./src/app/layouts/home-layout/home-layout.routing.ts","./src/app/home/home.component.html","./src/app/checkout/checkout.component.ts","./src/models/totales.ts","./src/app/cart/cart.component.html","./src/app/checkout/checkout.component.css","./src/app/home/home.component.css","./src/app/cart/cart.component.ts","./src/app/layouts/home-layout/home-layout.module.ts"],"names":[],"mappings":"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","file":"layouts-home-layout-home-layout-module.js","sourcesContent":["import {Injectable} from '@angular/core';\nimport {Apollo, gql} from 'apollo-angular';\nimport { Subscription } from 'rxjs';\n//import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { HttpHeaders } from '@angular/common/http';\n//import { StorageService } from \"./storage.service\";\n\nconst TOKENAUTH = gql`\n  mutation TokenAuth($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      token\n    }\n  }\n`;\n\nconst LINKS = gql`\n  query Links {\n    links {\n      id\n      url\n      description\n      precio\n      postedBy {\n        username\n      }\n    }\n  }\n`;\n\n/*\n  input Product {\n    product: Int\n    cantidad: Float\n    precio: Float\n  }\n*/\nconst CREATESALE = gql`\n  mutation CreateSale($subtotal: Float!, $iva: Float!, $total: Float!, $products : [DetailInput]!) {\n    createSale(subtotal: $subtotal, iva: $iva, total: $total, products : $products) {\n      id\n      total\n      postedBy {\n        id\n        username\n        email\n\n      }\n   }\n  }\n  `;\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class GraphqlSalesService  {\n\n  loading: boolean;\n  posts: any;\n  private querySubscription: Subscription;\n\n  constructor(private apollo: Apollo) {}\n\n  links() {\n \n    return this.apollo.watchQuery({\n      query: LINKS \n    });\n  \n  }\n  createSale(mytoken: string, subtotal: number, iva: number, total: number, products : any) {\n       console.log(\"token auth = \" + mytoken);\n      return this.apollo.mutate({\n        mutation: CREATESALE,\n        variables: {\n          subtotal: subtotal,\n          iva: iva,\n          total: total,\n          products: products\n        },\n        context: {\n          // example of setting the headers with context per operation\n          headers: new HttpHeaders().set('Authorization', 'JWT ' + mytoken),\n        },\n\n      });\n    \n  }\n   \n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NhcnQvY2FydC5jb21wb25lbnQuY3NzIn0= */\";","export default \"<ng-container *ngIf=\\\"(state | async) as s\\\">\\n\\t<!-- <pre>\\n    {{ s | json }}\\n  </pre> -->\\n\\t<h3>\\n\\t\\tCheckout\\n\\t\\t<button style=\\\"float: right;\\\" mat-icon-button [mat-dialog-close]><mat-icon>cancel</mat-icon></button>\\n  </h3>\\n\\n\\t<div *ngIf=\\\"s.cart.length > 0; else elseBlock\\\">\\n  <p>\\n    Review your items and checkout\\n  </p>\\n  <mat-card>\\n    <mat-card-header>\\n      <mat-card-title>Total: {{ s.tot.subTot | currency:'USD':'symbol':'1.2-2' }}</mat-card-title>\\n      <mat-card-subtitle>\\n      tax: {{ s.tot.tax | currency:'USD':'symbol':'1.2-2' }}\\n      <br />\\n          at checkout: {{ s.tot.grandTot | currency:'USD':'symbol':'1.2-2' }}\\n        </mat-card-subtitle>\\n      </mat-card-header>\\n      <mat-card-actions style=\\\"text-align: right;\\\">\\n        <button type=\\\"button\\\" mat-button color=\\\"accent\\\" (click)=\\\"completeOrder()\\\" >\\n          Complete my order <mat-icon>check</mat-icon>\\n        </button>\\n      </mat-card-actions>\\n  </mat-card>\\n  <div *ngFor=\\\"let item of s.cart\\\">\\n    <p>\\n      {{ item.name }}<br />\\n      <strong>{{ item.price }}</strong>\\n    </p>\\n  </div> \\n</div>\\n  <ng-template #elseBlock>\\n    <h4>Thank you for your fake purchase!</h4>\\n     <button type=\\\"button\\\" mat-button color=\\\"primary\\\" [mat-dialog-close]>\\n         Close <mat-icon>cancel</mat-icon>\\n        </button>\\n  </ng-template>\\n</ng-container>\";","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { CarritocomprasComponent } from 'app/carritocompras/carritocompras.component';\nimport * as Chartist from 'chartist';\nimport { Subscription } from 'rxjs';\nimport { GraphqlProductsService} from '../../services/graphql.products.service';\nimport { ShoppingCartService, CartItem, Totals } from '../../services/shopping-cart.service';\nimport { ShopItem } from '../../models/CartItem'\nimport { ProductApi } from '../../models/productapi'\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit, OnDestroy {\n\n  loading: boolean;\n  posts: any;\n  private querySubscription: Subscription;\n\n  constructor(private graphqlProductsService: GraphqlProductsService,\n    private shoppingCartService: ShoppingCartService\n    ) {}\n\n  cartState$ = this.shoppingCartService.state$;\n  \n  addItemToCart(item: ProductApi) {\n    //alert(JSON.stringify(item));\n    var myItem = new ShopItem();\n    myItem.id = item.id;\n    myItem.name = item.description;\n    myItem.price = item.precio;\n    this.shoppingCartService.addCartItem(myItem);\n  }\n\n  remove(item: CartItem): void {\n    this.shoppingCartService.removeCartItem(item);\n  }\n  ngOnInit() {\n\n\n\n    \n    this.querySubscription = this.graphqlProductsService.links()\n      .valueChanges\n      .subscribe(({ data, loading }) => {\n        this.loading = loading;\n        this.posts = JSON.parse(JSON.stringify(data)).links;\n        console.log(JSON.stringify(this.posts))\n      });\n  }\n\n  ngOnDestroy() {\n    this.querySubscription.unsubscribe();\n  }\n  \n  startAnimationForLineChart(chart){\n      let seq: any, delays: any, durations: any;\n      seq = 0;\n      delays = 80;\n      durations = 500;\n\n      chart.on('draw', function(data) {\n        if(data.type === 'line' || data.type === 'area') {\n          data.element.animate({\n            d: {\n              begin: 600,\n              dur: 700,\n              from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),\n              to: data.path.clone().stringify(),\n              easing: Chartist.Svg.Easing.easeOutQuint\n            }\n          });\n        } else if(data.type === 'point') {\n              seq++;\n              data.element.animate({\n                opacity: {\n                  begin: seq * delays,\n                  dur: durations,\n                  from: 0,\n                  to: 1,\n                  easing: 'ease'\n                }\n              });\n          }\n      });\n\n      seq = 0;\n  };\n  startAnimationForBarChart(chart){\n      let seq2: any, delays2: any, durations2: any;\n\n      seq2 = 0;\n      delays2 = 80;\n      durations2 = 500;\n      chart.on('draw', function(data) {\n        if(data.type === 'bar'){\n            seq2++;\n            data.element.animate({\n              opacity: {\n                begin: seq2 * delays2,\n                dur: durations2,\n                from: 0,\n                to: 1,\n                easing: 'ease'\n              }\n            });\n        }\n      });\n\n      seq2 = 0;\n  };\n/*\n<!-- The core Firebase JS SDK is always required and must be listed first -->\n<script src=\"https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js\"></script>\n\n<!-- TODO: Add SDKs for Firebase products that you want to use\n     https://firebase.google.com/docs/web/setup#available-libraries -->\n\n<script>\n  // Your web app's Firebase configuration\n  var firebaseConfig = {\n    apiKey: \"AIzaSyAF1og02DFYvP9tjGYNT6YlP2YSl6-G4RQ\",\n    authDomain: \"elmandadero-storage.firebaseapp.com\",\n    projectId: \"elmandadero-storage\",\n    storageBucket: \"elmandadero-storage.appspot.com\",\n    messagingSenderId: \"570694818428\",\n    appId: \"1:570694818428:web:f28410432578bf336647f9\"\n  };\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n</script>\n\n\n\n  ngOnInit() {\n\n      const dataDailySalesChart: any = {\n          labels: ['M', 'T', 'W', 'T', 'F', 'S', 'S'],\n          series: [\n              [12, 17, 7, 17, 23, 18, 38]\n          ]\n      };\n\n     const optionsDailySalesChart: any = {\n          lineSmooth: Chartist.Interpolation.cardinal({\n              tension: 0\n          }),\n          low: 0,\n          high: 50, // creative tim: we recommend you to set the high sa the biggest value + something for a better look\n          chartPadding: { top: 0, right: 0, bottom: 0, left: 0},\n      }\n\n      var dailySalesChart = new Chartist.Line('#dailySalesChart', dataDailySalesChart, optionsDailySalesChart);\n\n      this.startAnimationForLineChart(dailySalesChart);\n\n\n\n      const dataCompletedTasksChart: any = {\n          labels: ['12p', '3p', '6p', '9p', '12p', '3a', '6a', '9a'],\n          series: [\n              [230, 750, 450, 300, 280, 240, 200, 190]\n          ]\n      };\n\n     const optionsCompletedTasksChart: any = {\n          lineSmooth: Chartist.Interpolation.cardinal({\n              tension: 0\n          }),\n          low: 0,\n          high: 1000, // creative tim: we recommend you to set the high sa the biggest value + something for a better look\n          chartPadding: { top: 0, right: 0, bottom: 0, left: 0}\n      }\n\n      var completedTasksChart = new Chartist.Line('#completedTasksChart', dataCompletedTasksChart, optionsCompletedTasksChart);\n\n      // start animation for the Completed Tasks Chart - Line Chart\n      this.startAnimationForLineChart(completedTasksChart);\n\n\n\n\n      var datawebsiteViewsChart = {\n        labels: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],\n        series: [\n          [542, 443, 320, 780, 553, 453, 326, 434, 568, 610, 756, 895]\n\n        ]\n      };\n      var optionswebsiteViewsChart = {\n          axisX: {\n              showGrid: false\n          },\n          low: 0,\n          high: 1000,\n          chartPadding: { top: 0, right: 5, bottom: 0, left: 0}\n      };\n      var responsiveOptions: any[] = [\n        ['screen and (max-width: 640px)', {\n          seriesBarDistance: 5,\n          axisX: {\n            labelInterpolationFnc: function (value) {\n              return value[0];\n            }\n          }\n        }]\n      ];\n      var websiteViewsChart = new Chartist.Bar('#websiteViewsChart', datawebsiteViewsChart, optionswebsiteViewsChart, responsiveOptions);\n\n      //start animation for the Emails Subscription Chart\n      this.startAnimationForBarChart(websiteViewsChart);\n  }\n*/\n}\n","import { Routes } from '@angular/router';\n\nimport { HomeComponent } from '../../home/home.component';\nimport { UserProfileComponent } from '../../user-profile/user-profile.component';\nimport { TableListComponent } from '../../table-list/table-list.component';\nimport { TypographyComponent } from '../../typography/typography.component';\nimport { IconsComponent } from '../../icons/icons.component';\nimport { MapsComponent } from '../../maps/maps.component';\nimport { NotificationsComponent } from '../../notifications/notifications.component';\nimport { UpgradeComponent } from '../../upgrade/upgrade.component';\nimport { NewUserComponent } from '../../new-user/new-user.component';\nimport { ProductsComponent } from '../../products/products.component';\nimport { LoginComponent } from '../../login/login.component';\nimport { NewProductComponent } from '../../new-product/new-product.component';\nimport { CarritocomprasComponent } from '../../carritocompras/carritocompras.component';\n\nexport const HomeLayoutRoutes: Routes = [\n    // {\n    //   path: '',\n    //   children: [ {\n    //     path: 'dashboard',\n    //     component: DashboardComponent\n    // }]}, {\n    // path: '',\n    // children: [ {\n    //   path: 'userprofile',\n    //   component: UserProfileComponent\n    // }]\n    // }, {\n    //   path: '',\n    //   children: [ {\n    //     path: 'icons',\n    //     component: IconsComponent\n    //     }]\n    // }, {\n    //     path: '',\n    //     children: [ {\n    //         path: 'notifications',\n    //         component: NotificationsComponent\n    //     }]\n    // }, {\n    //     path: '',\n    //     children: [ {\n    //         path: 'maps',\n    //         component: MapsComponent\n    //     }]\n    // }, {\n    //     path: '',\n    //     children: [ {\n    //         path: 'typography',\n    //         component: TypographyComponent\n    //     }]\n    // }, {\n    //     path: '',\n    //     children: [ {\n    //         path: 'upgrade',\n    //         component: UpgradeComponent\n    //     }]\n    // }\n    { path: 'home',      component: HomeComponent },\n    { path: 'user-profile',   component: UserProfileComponent },\n    { path: 'new-user',       component: NewUserComponent },\n    { path: 'new-product',    component: NewProductComponent },\n    { path: 'login',          component: LoginComponent },\n    { path: 'home/productos',      component: ProductsComponent },\n    { path: 'carrito',        component: CarritocomprasComponent },\n    { path: 'table-list',     component: TableListComponent },\n    { path: 'typography',     component: TypographyComponent },\n    { path: 'icons',          component: IconsComponent },\n    { path: 'maps',           component: MapsComponent },\n    { path: 'notifications',  component: NotificationsComponent },\n    { path: 'upgrade',        component: UpgradeComponent },\n];\n","export default \"\\n\\n<div class=\\\"main-content\\\">\\n\\n   \\n    <div class=\\\"container-fluid\\\">\\n  \\n      <ng-container *ngIf=\\\"cartState$ | async as state\\\">\\n          <app-cart [state]=\\\"state\\\"></app-cart>\\n          <mat-card>\\n              <mat-card-header>\\n                  <mat-card-title>Total: {{ state.tot.subTot | currency:'USD':'symbol':'1.2-2' }}</mat-card-title>\\n      \\n                  <mat-card-subtitle>\\n                      tax: {{ state.tot.tax | currency:'USD':'symbol':'1.2-2' }}\\n                      <br />\\n                at checkout: {{ state.tot.grandTot | currency:'USD':'symbol':'1.2-2' }}\\n              </mat-card-subtitle>\\n            </mat-card-header>\\n            <mat-card-actions>\\n              <mat-chip-list>\\n                <mat-chip *ngFor=\\\"let item of state.cart\\\" [removable]=\\\"true\\\" (removed)=\\\"remove(item)\\\">{{ item.name }}\\n                  <mat-icon matChipRemove>cancel</mat-icon>\\n                </mat-chip>\\n              </mat-chip-list>\\n            </mat-card-actions>\\n          </mat-card>\\n        <hr />\\n    <!--\\n        <mat-card *ngFor=\\\"let item of state.store\\\">\\n              <mat-card-header>\\n                  {{ item.name }}\\n              </mat-card-header>\\t\\t\\n          <mat-card-subtitle>\\n            \\n            <ul>\\n              <li>{{ item.details }}</li>\\n              <li>{{ item.price | currency:'USD':'symbol':'1.2-2' }}</li>\\n            </ul>\\n          </mat-card-subtitle>\\n          <mat-card-actions>\\n      \\n              <button mat-flat-button color=\\\"primary\\\" role=\\\"button\\\" (click)=\\\"addItemToCart(item)\\\">\\n            <mat-icon>add_shopping_cart</mat-icon>\\n            Add to cart\\n          </button>\\n          </mat-card-actions>\\n        </mat-card>\\n      -->\\n      </ng-container>\\n      \\n    \\n      <div class=\\\"row\\\"> \\n  \\n     \\n            \\n                <div class=\\\"col-md-4\\\" *ngFor=\\\"let product of posts\\\">\\n                <div class=\\\"card card-chart\\\">\\n                    <div class=\\\"card-header card-header-success\\\">\\n                      <img  width=\\\"50\\\" height=\\\"50\\\" src={{product.url}}>\\n                      Vendedor: {{product.postedBy.username}}\\n  \\n                    </div>\\n                    <div class=\\\"card-body\\\">\\n  \\n                      <p class=\\\"card-category\\\">\\n  \\n                          <span class=\\\"text-success\\\">\\n                              <img  width=\\\"200\\\" height=\\\"200\\\" src={{product.url}}>\\n                          </span> \\n                      </p>    \\n                          <h4 class=\\\"card-title\\\">{{product.id}} - {{product.description}}</h4>\\n  \\n                      \\n                      \\n  \\n                        <p class=\\\"card-category\\\">\\n                            <span class=\\\"text-success\\\"><i class=\\\"fa fa-long-arrow-up\\\"></i>  \\n                            </span> Precio: ${{product.precio}} \\n                        </p>\\n                    </div>\\n                    <div class=\\\"card-footer\\\">\\n                      \\n                      <div class=\\\"stats\\\">\\n  \\n                          <button mat-flat-button color=\\\"primary\\\" role=\\\"button\\\" (click)=\\\"addItemToCart(product)\\\">\\n                              <mat-icon>add_shopping_cart</mat-icon>\\n                              Add to cart\\n                            </button>\\n                          <!--\\n                          <i class=\\\"material-icons text-danger\\\">warning</i>\\n                          <a href=\\\"javascript:void(0)\\\"> Comprar </a>\\n                      -->\\n                      </div>\\n                    </div>\\n                </div>\\n                </div>\\n              \\n        </div> \\n     \\n     \\n      \\n  </div>\\n  </div>\\n  \";","import { Component, OnInit } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { ShoppingCartService } from '../../services/shopping-cart.service';\nimport { GraphqlSalesService} from '../../services/graphql.sales.service';\nimport { Router } from '@angular/router';\nimport { StorageService } from \"../../services/storage.service\";\nimport { Totales } from \"../../models/totales\";\nimport { ShopItem } from \"../../models/CartItem\";\n\n//import { Observable, of } from 'rxjs';\n//import { switchMap, shareReplay, share, take } from 'rxjs/operators';\n//import {  map, tap    } from 'rxjs/operators';\n//import { Totales } from '../../models/totales'\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.css']\n})\nexport class CheckoutDialog implements OnInit {\n  state = this.shoppingCartService.state$.pipe();\n  //totals = this.shoppingCartService.total$.pipe();\n  myTotal = new Totales;\n  myCar = [];\n\n  mytotal : any;\n\n    // @Inject(MAT_DIALOG_DATA) public data: any,\n  constructor(\n    private shoppingCartService: ShoppingCartService,\n    private graphqlSalesService: GraphqlSalesService,\n    private storageService: StorageService,\n    private router: Router,\n    private dialogRef: MatDialogRef<CheckoutDialog>) { }\n\n  ngOnInit() {\n    this.state.subscribe(cart => { \n      this.myTotal = cart.tot;\n      //console.log(this.mytotal);\n      //console.log(cart.cart);\n      this.myCar = cart.cart;\n      \n    }\n    );\n  }\n  completeOrder() {\n    //console.log(this.state);\n\n    this.addSale();\n\n    \n    /*this.state.pipe(\n      map(([store, cart, tot, checkout]: any) => \n        ({ store, cart, tot, checkout })),\n      tap(tot => {\n          console.log('totales ', tot);\n        \n      }),\n      // make sure we share to the world! or just the entire app\n      shareReplay(1)\n    ); */\n    //this.shoppingCartService.checkout();\n  }\n\n  addSale() {\n    var products = [];\n    var mytoken = this.storageService.getSession(\"token\");\n    this.myCar.forEach(element => {\n      products.push({\n        product : element.id,\n        cantidad : 1,\n        precio: element.price\n      })\n    });\n    alert(JSON.stringify(products));\n/*\n    this.graphqlSalesService.createSale(mytoken, this.myTotal.subTot,\n                  this.myTotal.tax, this.myTotal.grandTot, products)\n    .subscribe(({ data }) => {\n       console.log('Sale created :  ', data);\n       this.router.navigate(['/dashboard']);\n    }, (error) => {\n       console.log('there was an error sending the query', error);\n    });\n  */\n   \n  }\n}","export class Totales {\n    subTot: number;\n    tax: number;\n    grandTot: number;  \n  }","export default \"<p>\\n\\tShopping Cart: <button mat-flat-button color=\\\"accent\\\" role=\\\"button\\\" [disabled]=\\\"state.cart.length < 1\\\" (click)=\\\"checkout()\\\">\\n    <mat-icon>shopping_cart</mat-icon>\\n     Checkout {{ state.cart.length }} Item{{ state.cart.length > 1 ? 's' : '' }}</button>\\n</p>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NoZWNrb3V0L2NoZWNrb3V0LmNvbXBvbmVudC5jc3MifQ== */\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5jb21wb25lbnQuY3NzIn0= */\";","import { Component, Input } from '@angular/core';\nimport { ShoppingCartService, CartItem } from '../../services/shopping-cart.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { CheckoutDialog } from '../checkout/checkout.component';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent  {\n\n  @Input() state: any;\n\n  constructor(private shoppingCartService: ShoppingCartService, private dialog: MatDialog) { }\n\n  checkout(): void {\n    // this.shoppingCartService.checkout();\n    let dialogRef = this.dialog.open(CheckoutDialog, {\n      // data: { state: this.state }, // now uses the observable\n      height: '400px',\n      width: '600px',\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HomeLayoutRoutes } from './home-layout.routing';\nimport { HomeComponent } from '../../home/home.component';\n//import { UserProfileComponent } from '../../user-profile/user-profile.component';\n//import { TableListComponent } from '../../table-list/table-list.component';\n//import { TypographyComponent } from '../../typography/typography.component';\n//import { IconsComponent } from '../../icons/icons.component';\n//import { MapsComponent } from '../../maps/maps.component';\nimport { NotificationsComponent } from '../../notifications/notifications.component';\n//import { UpgradeComponent } from '../../upgrade/upgrade.component';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatInputModule} from '@angular/material/input';\nimport {MatRippleModule} from '@angular/material/core';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport {MatTooltipModule} from '@angular/material/tooltip';\nimport {MatSelectModule} from '@angular/material/select';\nimport {NewUserComponent } from '../../new-user/new-user.component';\nimport {LoginComponent } from '../../login/login.component';\nimport { StorageService } from \"../../../services/storage.service\";\n//import {ProductsComponent } from '../../products/products.component';\n//import {NewProductComponent } from '../../new-product/new-product.component';\n\n//import { CarritocomprasComponent } from '../../carritocompras/carritocompras.component';\nimport { CartComponent } from '../../cart/cart.component';\nimport { CheckoutDialog } from '../../checkout/checkout.component';\n//CarritocomprasComponent,\n    //CartComponent,\n    //CheckoutDialog\n\nimport { ShoppingCartService } from '../../../services/shopping-cart.service';\n\nimport { MaterialModule } from '../../material/material.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild(HomeLayoutRoutes),\n    FormsModule,\n    ReactiveFormsModule,\n    MatButtonModule,\n    MatRippleModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatSelectModule,\n    MatTooltipModule,\n    MaterialModule\n  ],\n  declarations: [\n    HomeComponent,\n   // UserProfileComponent,\n    NewUserComponent,\n   // NewProductComponent,\n    LoginComponent,\n    //ProductsComponent,\n    //TableListComponent,\n    //TypographyComponent,\n    //IconsComponent,\n    //MapsComponent,\n    NotificationsComponent,\n    //UpgradeComponent,\n    //CarritocomprasComponent,\n    CartComponent,\n    CheckoutDialog\n  ],\n  providers: [StorageService, ShoppingCartService]\n\n\n})\n\nexport class HomeLayoutModule {}\n"],"sourceRoot":"webpack:///"}